<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reporte de Ventas</title>
</head>
<body>
  <h1>Reporte de Ventas</h1>

  
  <form method="GET">
    <label for="fecha_inicio">Fecha de </label>
    <input type="date" name="fecha_inicio" id="fecha_inicio" value="{{ request.GET.fecha_inicio }}">    

    <label for="cliente_id">Cliente</label>
    <select name="cliente_id">
      <option value="">Todos los clientes</option>
      {% for cliente in clientes %}
        <option value="{{ cliente.id }}" {% if request.GET.cliente_id == cliente.id|stringformat:"s" %}selected{% endif %}>{{ cliente.nombre }}</option>
      {% endfor %}
    </select>

    <label for="producto_id">Producto</label>
    <select name="producto_id">
      <option value="">Todos los productos</option>
      {% for producto in productos %}
        <option value="{{ producto.id }}" {% if request.GET.producto_id == producto.id|stringformat:"s" %}selected{% endif %}>{{ producto.nombre }}</option>
      {% endfor %}
    </select>

    <button type="submit">Generar Reporte</button>
  </form>

  <h2>Ventas Filtradas</h2>

  
  <table border="1">
    <thead>
      <tr>
        <th>fecha</th>
        <th>Producto</th>
        <th>Cliente</th>
        <th>Cantidad</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      {% for venta in ventas %}
      <tr>
        <td>{{ venta.fecha }}</td> 
        <td>{{ venta.producto.nombre }}</td>
        <td>{{ venta.cliente.nombre }}</td>
        <td>{{ venta.cantidad }}</td>
        <td>{{ venta.total }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5">No se encontraron ventas.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  
  <img src="{url 'grafico_ventas'}" alt="Grafico de ventas">
  <a href="{% url 'inicio' %}">Volver al inicio</a>

</body>
</html>
